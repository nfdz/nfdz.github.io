<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Dependency Locator | nfdz</title><meta name=keywords content="java,design-patterns,open-source"><meta name=description content="Java service locator pattern implementation"><meta name=author content="nfdz"><link rel=canonical href=https://nfdz.io/posts/2017/dependency-locator/><link crossorigin=anonymous href=/assets/css/stylesheet.4398b09e795c3aac93a04f4160281925a588bcdf14941ead87ab7bfe555ba854.css integrity="sha256-Q5iwnnlcOqyToE9BYCgZJaWIvN8UlB6th6t7/lVbqFQ=" rel="preload stylesheet" as=style><link rel=icon href=https://nfdz.io/images/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://nfdz.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://nfdz.io/favicon-32x32.png><link rel=apple-touch-icon href=https://nfdz.io/apple-touch-icon.png><link rel=mask-icon href=https://nfdz.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script src=https://cdn.counter.dev/script.js data-id=e8c4ac17-b831-4d09-99fc-d5c9883f0baf data-utcoffset=2></script>
<script src=/js/header_console.js></script><meta property="og:title" content="Dependency Locator"><meta property="og:description" content="Java service locator pattern implementation"><meta property="og:type" content="article"><meta property="og:url" content="https://nfdz.io/posts/2017/dependency-locator/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-11-12T00:00:00+00:00"><meta property="article:modified_time" content="2017-11-12T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Dependency Locator"><meta name=twitter:description content="Java service locator pattern implementation"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://nfdz.io/posts/"},{"@type":"ListItem","position":2,"name":"Dependency Locator","item":"https://nfdz.io/posts/2017/dependency-locator/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Dependency Locator","name":"Dependency Locator","description":"Java service locator pattern implementation","keywords":["java","design-patterns","open-source"],"articleBody":"Dependency inversion on Java and Android using the classic service locator pattern. For the development proccess of this project I have followed the Test-driven development (TDD) approach. I was very interested in creating a good set of tests to ensure that it works well in any case as it is a critical piece of the software architecture.\nThe library is free software (Apache-2.0) and you can see the code on GitHub.\nKey Features Easy to add and remove. Lazy creation. Thread safe. Testing friendly. Singleton. Releasable. Well tested. Quickstart Implement Dependency or SingletonDependency interface. Implement DependencyProvider that know how to create previous dependency. Supply these providers to the DependencyLocator in some point before use the dependencies, for instance at the entry point of your application. 1 DependencyLocator.provide(MyDependency.class, new MyDependencyProvider()); Locate this dependency where and when you want to use: 1 MyDependency dependency = (MyDependency)DependencyLocator.locate(MyDependency.class); Optional: Release this dependency when you do not need use it anymore: 1 DependencyLocator.release(dependency); Sample Project Check this sample project with three dependencies, one of them nested.\nDownload Jitpack If you use gradle, you just have to add the following in your build.gradle file:\n1 2 3 4 5 6 7 8 9 10 allprojects { repositories { ... maven { url 'https://jitpack.io' } } } ... dependencies { compile 'com.github.nfdz:DependencyLocator:v1.0.0' } Jitpack works with several build systems, please checkout the documentation if you need help with yours.\nManual JAR Download the JAR library from the GitHub Releases of the repository.\n","wordCount":"245","inLanguage":"en","datePublished":"2017-11-12T00:00:00Z","dateModified":"2017-11-12T00:00:00Z","author":{"@type":"Person","name":"nfdz"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://nfdz.io/posts/2017/dependency-locator/"},"publisher":{"@type":"Organization","name":"nfdz","logo":{"@type":"ImageObject","url":"https://nfdz.io/images/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://nfdz.io/ accesskey=h title="nfdz (Alt + H)">nfdz</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://nfdz.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://nfdz.io/archives title=Archive><span>Archive</span></a></li><li><a href=https://nfdz.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://github.com/nfdz title=Projects><span>Projects</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Dependency Locator</h1><div class=post-description>Java service locator pattern implementation</div><div class=post-meta><span title='2017-11-12 00:00:00 +0000 UTC'>November 12, 2017</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;nfdz</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#key-features aria-label="Key Features">Key Features</a></li><li><a href=#quickstart aria-label=Quickstart>Quickstart</a><ul><li><a href=#sample-project aria-label="Sample Project">Sample Project</a></li></ul></li><li><a href=#download aria-label=Download>Download</a><ul><li><a href=#jitpack aria-label=Jitpack>Jitpack</a></li><li><a href=#manual-jar aria-label="Manual JAR">Manual JAR</a></li></ul></li></ul></div></details></div><div class=post-content><p>Dependency inversion on Java and Android using the classic service locator pattern. For the development proccess of this project I have followed the <a href=https://en.wikipedia.org/wiki/Test-driven_development target=_blank>Test-driven development</a> (TDD) approach. I was very interested in creating a good set of tests to ensure that it works well in any case as it is a critical piece of the software architecture.</p><p>The library is free software (Apache-2.0) and you can see the code on <a href=https://github.com/nfdz/DependencyLocator target=_blank>GitHub</a>.</p><h2 id=key-features>Key Features<a hidden class=anchor aria-hidden=true href=#key-features>#</a></h2><ul><li>Easy to add and remove.</li><li>Lazy creation.</li><li>Thread safe.</li><li>Testing friendly.</li><li>Singleton.</li><li>Releasable.</li><li>Well tested.</li></ul><h2 id=quickstart>Quickstart<a hidden class=anchor aria-hidden=true href=#quickstart>#</a></h2><ol><li>Implement <code>Dependency</code> or <code>SingletonDependency</code> interface.</li><li>Implement <code>DependencyProvider</code> that know how to create previous dependency.</li><li>Supply these providers to the <code>DependencyLocator</code> in some point before use the dependencies, for instance at the entry point of your application.<div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>DependencyLocator</span><span class=o>.</span><span class=na>provide</span><span class=o>(</span><span class=n>MyDependency</span><span class=o>.</span><span class=na>class</span><span class=o>,</span> <span class=k>new</span> <span class=n>MyDependencyProvider</span><span class=o>());</span>
</span></span></code></pre></td></tr></table></div></div></li><li>Locate this dependency where and when you want to use:<div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>MyDependency</span> <span class=n>dependency</span> <span class=o>=</span> <span class=o>(</span><span class=n>MyDependency</span><span class=o>)</span><span class=n>DependencyLocator</span><span class=o>.</span><span class=na>locate</span><span class=o>(</span><span class=n>MyDependency</span><span class=o>.</span><span class=na>class</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div></li><li>Optional: Release this dependency when you do not need use it anymore:<div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>DependencyLocator</span><span class=o>.</span><span class=na>release</span><span class=o>(</span><span class=n>dependency</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div></li></ol><h3 id=sample-project>Sample Project<a hidden class=anchor aria-hidden=true href=#sample-project>#</a></h3><p>Check <a href=https://github.com/nfdz/DependencyLocator/tree/master/Demo target=_blank>this</a> sample project with three dependencies, one of them nested.</p><h2 id=download>Download<a hidden class=anchor aria-hidden=true href=#download>#</a></h2><h3 id=jitpack>Jitpack<a hidden class=anchor aria-hidden=true href=#jitpack>#</a></h3><p>If you use gradle, you just have to add the following in your <code>build.gradle</code> file:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>allprojects</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>repositories</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=o>...</span>
</span></span><span class=line><span class=cl>      <span class=n>maven</span> <span class=o>{</span> <span class=n>url</span> <span class=s1>&#39;https://jitpack.io&#39;</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>   <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>...</span>
</span></span><span class=line><span class=cl><span class=n>dependencies</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>   <span class=n>compile</span> <span class=s1>&#39;com.github.nfdz:DependencyLocator:v1.0.0&#39;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Jitpack works with several build systems, please checkout the <a href=https://jitpack.io/docs/BUILDING/ target=_blank>documentation</a> if you need help with yours.</p><h3 id=manual-jar>Manual JAR<a hidden class=anchor aria-hidden=true href=#manual-jar>#</a></h3><p>Download the JAR library from the <a href=https://github.com/nfdz/DependencyLocator/releases target=_blank>GitHub Releases</a> of the repository.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://nfdz.io/tags/java/>java</a></li><li><a href=https://nfdz.io/tags/design-patterns/>design-patterns</a></li><li><a href=https://nfdz.io/tags/open-source/>open-source</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://nfdz.io/>nfdz</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>